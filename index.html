<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>تشخيصك الذكي – مع غلا</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(135deg, #9c27b0, #f9c5d1);
      padding: 30px;
      direction: rtl;
      min-height: 100vh;
      box-sizing: border-box;
      padding-bottom: 320px;
    }

    .footer-image {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 300px;
      background: url('https://i.pinimg.com/736x/98/a2/e3/98a2e3ce57b9a56472618480213c45c0.jpg') no-repeat center bottom;
      background-size: contain;
      background-color: #f9c5d1;
      z-index: 0;
      opacity: 0.95;
    }

    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      border: 2px solid #f3d1f4;
      display: none;
      position: relative;
      z-index: 2;
    }

    .active {
      display: block;
    }

    .chat-bubble {
      margin: 15px 0;
      padding: 12px 18px;
      border-radius: 20px;
      max-width: 80%;
      line-height: 1.6;
      animation: fadeIn 0.6s ease-in-out;
    }

    .bot {
      background-color: #e1bee7;
      color: #4a148c;
      align-self: flex-start;
    }

    .user {
      background-color: #ce93d8;
      color: white;
      align-self: flex-end;
      text-align: right;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    input, button {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    button {
      background-color: #ce93d8;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #ab47bc;
    }

    #finalName {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #4a148c;
      text-align: center;
    }

    #finalResult {
      font-size: 18px;
      line-height: 1.8;
    }
  </style>
</head>
<body>
  <div id="startPage" class="container active">
    <h2> اهلًا بك في رحلة التشخيص الذكي </h2>
    <p>وش اسمك؟</p>
    <input type="text" id="username" placeholder="أدخل اسمك">
    <button onclick="startQuiz()">ابدأ</button>
  </div>

  <div id="questionPage" class="container">
    <h2>👩‍⚕️ غلا تسأل:</h2>
    <div id="chatArea" style="display: flex; flex-direction: column;"></div>
    <div id="optionsArea"></div>
  </div>

  <div id="resultPage" class="container">
    <div id="finalName"></div>
    <h2>📊 النتيجة</h2>
    <div id="finalResult"></div>
    <button onclick="restartQuiz()">🔁 إعادة</button>
  </div>

  <div class="footer-image"></div>

  <script>
    const questions = [
      {q: "كم ساعة تنام باليوم؟", options: ["أقل من 5 ساعات", "بين 5 و7 ساعات", "أكثر من 7 ساعات"]},
      {q: "كم كوب مويه تشرب يومياً؟", options: ["أقل من 4 أكواب", "بين 4 و8 أكواب", "أكثر من 8 أكواب"]},
      {q: "تمارس رياضة كم مره بالأسبوع؟", options: ["ما أمارس", "1 إلى 2 مره", "3 مرات أو أكثر"]},
      {q: "تاكل خضار وفواكه يومياً؟", options: ["نعم", "أحياناً", "لا"]},
      {q: "إذا صار لك شي يضايقك، وش تسوي؟", options: ["أحاول أهدأ", "أتجاهل المشكلة", "أتكلم مع أحد"]},
      {q: "تحب تكون لحالك إذا تضايقت؟", options: ["نعم", "أحياناً", "لا"]},
      {q: "إذا صار موقف مزعج، كم تاخذ وقت وترجع طبيعي؟", options: ["ساعات قليلة", "عدة ساعات", "أخذ وقت طويل"]},
    ];

    let currentStep = 0;
    let answers = [];
    let username = "";

    const startPage = document.getElementById("startPage");
    const questionPage = document.getElementById("questionPage");
    const resultPage = document.getElementById("resultPage");
    const chatArea = document.getElementById("chatArea");
    const optionsArea = document.getElementById("optionsArea");
    const finalName = document.getElementById("finalName");
    const finalResult = document.getElementById("finalResult");

    function startQuiz() {
      username = document.getElementById("username").value.trim();
      if (!username) return;

      startPage.classList.remove("active");
      questionPage.classList.add("active");

      showBotMessage(`هلا ${username}! خل نبدأ...`);
      setTimeout(() => showBotMessage(questions[currentStep].q), 600);
      showOptions();
    }

    function showBotMessage(msg) {
      const botMsg = document.createElement("div");
      botMsg.className = "chat-bubble bot";
      botMsg.innerHTML = msg;
      chatArea.appendChild(botMsg);
      chatArea.scrollTop = chatArea.scrollHeight;
    }

    function showUserMessage(msg) {
      const userMsg = document.createElement("div");
      userMsg.className = "chat-bubble user";
      userMsg.innerHTML = msg;
      chatArea.appendChild(userMsg);
      chatArea.scrollTop = chatArea.scrollHeight;
    }

    function showOptions() {
      optionsArea.innerHTML = "";
      const question = questions[currentStep];
      question.options.forEach((option) => {
        const button = document.createElement("button");
        button.innerText = option;
        button.onclick = () => selectAnswer(option);
        optionsArea.appendChild(button);
      });
    }

    function selectAnswer(answer) {
      answers.push(answer);
      currentStep++;
      showUserMessage(answer);

      if (currentStep < questions.length) {
        setTimeout(() => {
          showBotMessage(questions[currentStep].q);
          showOptions();
        }, 600);
      } else {
        setTimeout(() => showResult(), 700);
      }
    }

    function showResult() {
      questionPage.classList.remove("active");
      resultPage.classList.add("active");

      let physicalScore = 0;
      if (answers[0] === "أكثر من 7 ساعات") physicalScore++;
      if (answers[1] === "أكثر من 8 أكواب") physicalScore++;
      if (answers[2] === "3 مرات أو أكثر") physicalScore++;
      if (answers[3] === "نعم") physicalScore++;
      else if (answers[3] === "أحياناً") physicalScore += 0.5;

      finalName.innerHTML = `👤 ${username}`;
      let comment = "";

      if (physicalScore >= 3.5) {
        comment = "صحتك رائعة ماشاءالله، استمر في المحافظة على نمط الحياة الصحي.";
      } else if (physicalScore >= 2) {
        comment = "صحتك تحتاج إلى بعض الاهتمام، لكنك في المسار الصحيح.";
      } else {
        comment = "صحتك بحاجة إلى اهتمام أكبر، لا تدع الظروف تمنعك من الاعتناء بنفسك.";
      }

      let tips = [];

      if (answers[0] === "أقل من 5 ساعات") tips.push("🛌 حاول تنام على الأقل 7 ساعات يومياً، النوم سر النشاط.");
      else if (answers[0] === "بين 5 و7 ساعات") tips.push("😴 نومك جيد، لكن حاول تزيده شوي لصحة أفضل.");

      if (answers[1] === "أقل من 4 أكواب") tips.push("💧 جسمك يحتاج مويه! اشرب أكثر لتحافظ على نشاطك.");
      else if (answers[1] === "بين 4 و8 أكواب") tips.push("🥤 شربك جيد، لكن حاول توصل لـ 8 أكواب يومياً.");

      if (answers[2] === "ما أمارس") tips.push("🏃‍♂️ حاول تبدأ بأي نشاط خفيف، مثل المشي، له فوائد كبيرة!");
      else if (answers[2] === "1 إلى 2 مره") tips.push("💪 ممتاز إنك تتحرك، حاول تزود عدد الأيام.");

      if (answers[3] === "لا") tips.push("🥦 الأكل الصحي أساس، أضف خضار وفواكه لوجباتك.");
      else if (answers[3] === "أحياناً") tips.push("🍏 استمر وزوّد كمية الخضار والفواكه تدريجياً.");

      if (answers[4] === "أتجاهل المشكلة") tips.push("🧠 التجاهل ممكن يضغطك أكثر، جرب تواجه الأمور بلطف أو تتكلم مع أحد.");
      if (answers[5] === "نعم") tips.push("🤝 الوحدة مو دايم حل، جرب تتكلم مع أحد تثق فيه.");
      if (answers[6] === "أخذ وقت طويل") tips.push("⏳ طبيعي تمر بلحظات صعبة، لكن لو طالت، لا تتردد تطلب دعم.");
      else if (answers[6] === "عدة ساعات") tips.push("🕒 كويس إنك تتجاوز، وحاول تطور طرق التهدئة السريعة.");

      let resultText = `<div style="font-size: 18px; margin-bottom: 10px;">${comment}</div>`;
      if (tips.length > 0) {
        resultText += "<h4>💡 نصائح مخصصة لك:</h4><ul style='line-height: 1.8;'>";
        tips.forEach(tip => {
          resultText += `<li>${tip}</li>`;
        });
        resultText += "</ul>";
      }

      finalResult.innerHTML = resultText;
    }

    function restartQuiz() {
      currentStep = 0;
      answers = [];
      chatArea.innerHTML = '';
      optionsArea.innerHTML = '';
      finalResult.innerHTML = '';
      finalName.innerHTML = '';
      resultPage.classList.remove("active");
      startPage.classList.add("active");
    }
  </script>
</body>
</html>
